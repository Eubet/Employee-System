@{
    ViewData["Title"] = "Home Page";
}

<!--Page Heading-->
@*<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>
    @*<a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-download fa-sm text-white-50"></i> Generate Report</a>*@
@*</div>*@

<!-- Breadcrumbs-->
<ol class="breadcrumb">
    <li class="breadcrumb-item">
        <a href="#">Dashboard</a>
    </li>
    <li class="breadcrumb-item active">Overview</li>
</ol>

<!-- Content Row -->
<div class="row">
    <!--Four cards begin-->

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-success shadow h-100 py-2">
            <a asp-controller="Employee" asp-action="Index" style="text-decoration: none;">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Employees</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800" style="font-size:30pt;color: aqua;">@ViewBag.Employees</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-angle-right fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-primary shadow h-100 py-2">
            <a asp-controller="Supervisor" asp-action="Index" style="text-decoration: none;">

                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Supervisors</div>
                            <div class="h5 mb-0 font-weight-bolder text-gray-800" style="font-size:30pt; color: aqua;">@ViewBag.Supervisor</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-laptop fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-primary shadow h-100 py-2">
            <a asp-controller="Surbodinate" asp-action="Index" style="text-decoration: none;">

                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Surbodinates</div>
                            <div class="h5 mb-0 font-weight-bolder text-gray-800" style="font-size:30pt; color: aqua;">@ViewBag.Surbodinates</div>
                        </div>
                        <div class="col-auto">
                            <i class="fa fa-people-carry fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-primary shadow h-100 py-2">
            <a asp-controller="Audit" asp-action="Index" style="text-decoration: none;">

                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Audit</div>
                            <div class="h5 mb-0 font-weight-bolder text-gray-800 ">View Audit Log</div>
                        </div>
                        <div class="col-auto">
                            <i class="fa fa-file-archive fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div>


<!--Content Row 2 -->
<div class="row">
    <div class="col-xl-4 col-lg-6">
        <div class="card shadow mb-4">
            <!--Card body-->
            <div class="card-body">
                <div class="chart-pie pt-xl-5 pt-md-5 pb-2">
                    <canvas id="myPieChart" width="50%"></canvas>
                </div>
                <div class="mt-4 text-center small">
                    <span class="mr-2">
                        <i class="fas fa-circle text-primary"></i> Supervisors
                    </span>
                    <span class="mr-2">
                        <i class="fas fa-circle text-success"></i> Subordinates
                    </span>

                </div>
            </div>
        </div>
    </div>
    <div class="card shadow mb-2 col-xl-4 col-lg-3">
        <div class="card-header ">
            <h6 class="m-0 font-weight-bold text-primary">Dictum</h6>
        </div>
        <div class="card-body">
            Dis primis risus egestas. Semper fames pellentesque magna proin tellus duis nulla.

            Penatibus curae; et gravida orci dolor magna cursus, ipsum phasellus magna. Consectetuer Primis risus curabitur elit sed sem accumsan cras curabitur.

            Erat ridiculus auctor. Aptent, nisl auctor. Laoreet. Cras consequat ultrices arcu est auctor ultricies cras lectus volutpat.
        </div>
    </div>

</div>


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>

<script src="~/js/demo/chart-pie-demo.js" type="text/javascript"></script>


@section Scripts{

    <script>
        function GetChartData() {
            var supervisors = JSON.stringify('Html.Raw(ViewBag.Supervisor)');
            var surbodinates = JSON.stringify('Html.Raw(ViewBag.Surbodinates)');

            $.ajax({
                type: "GET",
                url: "/Home/Index",
                data: [supervisors, surbodinates],
                traditional: true,
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',

                error: function (xhr) {
                    console.log(xhr.status);
                    alert("Ooooops! Something went wrong!!" + xhr.responseText)
                },

                success: function () {
                    var ctx = document.getElementById("myPieChart");
                    var myPieChart = new Chart(ctx, {
                        type: 'doughnut',
                        data: {

                            labels: ["Supervisors", "Surbodinates"],
                            datasets: [{
                                //label: "Summary Of Employees",
                                data: [supervisors, surbodinates],
                                //url: 'Url.Action("Index", "Home"',
                                backgroundColor: ['#4e73df', '#1cc88a'],
                                hoverBackgroundColor: ['#2e59d9', '#17a673'],
                                hoverBorderColor: "rgba(234, 236, 244, 1)",
                            }],
                        },
                        options: {
                            maintainAspectRatio: false,
                            tooltips: {
                                backgroundColor: "rgb(255,255,255)",
                                bodyFontColor: "#858796",
                                borderColor: '#dddfeb',
                                borderWidth: 1,
                                xPadding: 15,
                                yPadding: 15,
                                displayColors: false,
                                caretPadding: 10,
                            },
                            legend: {
                                display: false
                            },
                            cutoutPercentage: 80,
                        },
                    });


                }



            });
        }

    </script>
}
